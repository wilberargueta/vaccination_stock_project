"use strict";(self.webpackChunkui=self.webpackChunkui||[]).push([[592],{6390:(Z,u,i)=>{i.d(u,{i:()=>v});var m=i(8239),t=i(2383),c=i(7537),s=i(7901),l=i(2070),o=i(740),g=i(7962),_=i(6408),E=i(6019),I=i(6018),V=i(8758),A=i(4736),O=i(9308),P=i(1210);function T(e,p){1&e&&t._UZ(0,"app-spinner-load")}function M(e,p){1&e&&(t.TgZ(0,"small",17),t._uU(1,"Debe seleccionar una vacuna"),t.qZA())}function C(e,p){1&e&&(t.TgZ(0,"small",18),t._uU(1,"Fecha invalida"),t.qZA())}function D(e,p){1&e&&(t.TgZ(0,"small",19),t._uU(1,"Contrase\xf1a invalida"),t.qZA())}function x(e,p){if(1&e&&(t.TgZ(0,"div",3),t.TgZ(1,"h5"),t._uU(2,"Agregar vacuna"),t.qZA(),t.TgZ(3,"div",4),t.TgZ(4,"div",5),t.TgZ(5,"label",6),t._uU(6,"Vacuna"),t.qZA(),t.TgZ(7,"span",7),t._UZ(8,"p-dropdown",8),t.TgZ(9,"label"),t._uU(10,"Seleccione"),t.qZA(),t.qZA(),t.YNc(11,M,2,0,"small",9),t.qZA(),t.TgZ(12,"div",10),t.TgZ(13,"label",11),t._uU(14,"Date"),t.qZA(),t._UZ(15,"input",12),t.YNc(16,C,2,0,"small",13),t.qZA(),t.TgZ(17,"div",5),t.TgZ(18,"label",14),t._uU(19,"Number de dosis"),t.qZA(),t._UZ(20,"p-inputNumber",15),t.YNc(21,D,2,0,"small",16),t.qZA(),t.qZA(),t.qZA()),2&e){const n=t.oxw();t.xp6(3),t.Q6J("formGroup",n.vaccinationForm),t.xp6(5),t.Q6J("options",n.vaccinationOptions)("autoDisplayFirst",!1),t.xp6(3),t.Q6J("ngIf",n.vaccinationForm.get("type").invalid),t.xp6(5),t.Q6J("ngIf",n.vaccinationForm.get("date").invalid),t.xp6(4),t.Q6J("showButtons",!0)("min",0)("max",100),t.xp6(1),t.Q6J("ngIf",n.vaccinationForm.get("dose").invalid)}}function r(e,p){if(1&e){const n=t.EpF();t.TgZ(0,"div",20),t.TgZ(1,"button",21),t.NdJ("click",function(){return t.CHM(n),t.oxw().save()}),t.qZA(),t.TgZ(2,"button",22),t.NdJ("click",function(){return t.CHM(n),t.oxw().cancelSave()}),t.qZA(),t.qZA()}if(2&e){const n=t.oxw();t.xp6(1),t.Q6J("disabled",n.vaccinationForm.invalid)}}let v=(()=>{class e{constructor(n,a,d,f){this.vaccinationService=n,this.messageService=a,this.confirmationService=d,this.activeRouter=f,this.disableSaveButton=!1,this.vaccinationSaved=new t.vpe,this.formVaccinationValid=new t.vpe,this.spinner=!0,this.updateVaccination=!1,this.buttonSaveText="Guardar",this.vaccinationForm=Object.create(null),this.vaccinationOptions=[]}ngOnInit(){var n=this;return(0,m.Z)(function*(){n.vaccinationOptions=n.vaccinationService.getVaccinateOptions(),n.vaccinationService.vaccinationEventSuscribe.subscribe({next:d=>n.save(!1)}),n.vaccinationForm=new c.cw({type:new c.NI(null,[c.kI.required]),date:new c.NI(null,[c.kI.required]),dose:new c.NI("0",[c.kI.required,c.kI.pattern(/^[1-9]+\d*$/)])},{updateOn:"change"}),n.vaccinationForm.valueChanges.subscribe({next:d=>n.formVaccinationValid.emit(n.vaccinationForm.valid)});const a=Number(n.activeRouter.snapshot.paramMap.get("id"));if(null!==a&&Number.isNaN(a)){n.updateVaccination=!0,n.buttonSaveText="Actualizar";const d=yield n.getVaccinationById(a);n.vaccinationForm.get("type").setValue(d.type),n.vaccinationForm.get("date").setValue(d.date),n.vaccinationForm.get("dose").setValue(d.dose),n.employee=d.employee}else n.updateVaccination=!1,n.buttonSaveText="Guardar";n.spinner=!1})()}save(n=!0){if(this.vaccinationForm.invalid)return void this.messageService.add({severity:"error",summary:"Error",detail:"Los datos ingresados en el formulario estan incorrectos",life:3e3});this.spinner=!0;const a=Object.assign({},this.vaccinationForm.getRawValue());a.date=l(a.date).format("YYYY-MM-DD"),a.employee=this.employee,a.type=a.type.value,this.updateVaccination?this.vaccinationService.update(a).subscribe(this.subscribeOnSaveVaccination(n)):this.vaccinationService.save(a).subscribe(this.subscribeOnSaveVaccination(n))}getVaccinationById(n){return new Promise((a,d)=>{this.vaccinationService.getById(n).subscribe({next:f=>{a(f.content)},error:f=>{a(null)}})})}subscribeOnSaveVaccination(n=!0){return{next:a=>{a.ok?(this.vaccinationSaved.emit(a.content),n&&this.messageService.add({severity:"success",summary:"Exito",detail:"Vacuna agregada correctamente",life:3e3})):(this.vaccinationSaved.emit(null),n&&this.messageService.add({severity:"error",summary:"Error",detail:"No fue posible agregar la vacuna",life:3e3})),this.spinner=!1},error:a=>{this.spinner=!1,this.vaccinationSaved.emit(null),n&&this.messageService.add({severity:"error",summary:"Error",detail:"No fue posible agregar la vacuna",life:3e3})},complete:()=>{}}}cancelSave(){this.vaccinationSaved.emit(null)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(o.V),t.Y36(s.ez),t.Y36(s.YP),t.Y36(g.gz))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-edith-vaccination"]],inputs:{disableSaveButton:"disableSaveButton",employee:"employee"},outputs:{vaccinationSaved:"vaccinationSaved",formVaccinationValid:"formVaccinationValid"},features:[t._Bn([s.ez,s.YP])],decls:4,vars:3,consts:[[4,"ngIf"],["class","card",4,"ngIf"],["class","card p-text-right",4,"ngIf"],[1,"card"],[1,"p-fluid","p-formgrid","p-grid",3,"formGroup"],[1,"p-field","p-col-12","p-md-3"],["for","state"],[1,"p-float-label"],["inputId","id","optionLabel","name","formControlName","type",3,"options","autoDisplayFirst"],["id","select-help","class","p-error",4,"ngIf"],[1,"p-field","p-col-12","p-md-6"],["for","date"],["id","date","type","date","pInputText","","formControlName","date"],["id","date-help","class","p-error",4,"ngIf"],["for","minmax-buttons"],["mode","decimal","formControlName","dose","inputId","minmax-buttons",3,"showButtons","min","max"],["id","dose-help","class","p-error",4,"ngIf"],["id","select-help",1,"p-error"],["id","date-help",1,"p-error"],["id","dose-help",1,"p-error"],[1,"card","p-text-right"],["pButton","","pRipple","","label","Guardar","icon","pi pi-save",1,"p-button-success","p-mr-2","p-mb-2",3,"disabled","click"],["pButton","","pRipple","","label","Cancelar","icon","pi pi-arrow-left",1,"p-button-secondary","p-mr-2","p-mb-2",3,"click"]],template:function(n,a){1&n&&(t._UZ(0,"p-toast"),t.YNc(1,T,1,0,"app-spinner-load",0),t.YNc(2,x,22,9,"div",1),t.YNc(3,r,3,1,"div",2)),2&n&&(t.xp6(1),t.Q6J("ngIf",a.spinner),t.xp6(1),t.Q6J("ngIf",!a.spinner),t.xp6(1),t.Q6J("ngIf",!a.disableSaveButton))},directives:[_.FN,E.O5,I.K,c.JL,c.sg,V.Lt,c.JJ,c.u,c.Fj,A.o,O.Rn,P.Hq],styles:[""]}),e})()},740:(Z,u,i)=>{i.d(u,{V:()=>s});var m=i(273),t=i(2383),c=i(4522);let s=(()=>{class l{constructor(o){this.http=o,this.vaccinationEventSuscribe=new m.x,this.URL_API="/vaccination-stock"}save(o){return this.http.post(this.URL_API,o)}update(o){return this.http.put(this.URL_API,o)}delete(o){return this.http.delete(`${this.URL_API}/${o}`)}deleteList(o){return this.http.post(`${this.URL_API}/delete/list`,o)}getById(o){return this.http.get(`${this.URL_API}/${o}`)}getByEmployeeId(o){return this.http.get(`${this.URL_API}/${o}/employee`)}getAll(){return this.http.get(this.URL_API)}getVaccinateOptions(){return[{name:"Sputnik",value:"Sputnik",id:1},{name:"AstraZeneca",value:"AstraZeneca",id:2},{name:"Pfizer",value:"Pfizer",id:3},{name:"Jhonson & Jhonson",value:"Jhonson & Jhonson",id:4}]}}return l.\u0275fac=function(o){return new(o||l)(t.LFG(c.eN))},l.\u0275prov=t.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},4586:(Z,u,i)=>{i.r(u),i.d(u,{VaccinationModule:()=>x});var m=i(6019),t=i(7962),c=i(6390),s=i(2383);const l=[{path:"edith",component:c.i}];let h=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=s.oAB({type:r}),r.\u0275inj=s.cJS({imports:[[t.Bz.forChild(l)],t.Bz]}),r})();var o=i(8758),g=i(7537),_=i(6408),E=i(1210),I=i(1187),V=i(3575),A=i(4736),O=i(9050),P=i(3948),T=i(4187),M=i(9308),C=i(4522),D=i(8449);let x=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=s.oAB({type:r}),r.\u0275inj=s.cJS({providers:[{provide:C.TP,useClass:D.s,multi:!0}],imports:[[m.ez,h,o.kW,g.u5,g.UX,_.EV,E.hJ,I.D,V.O,A.j,O.gz,P.V,T.N,M.L$]]}),r})()}}]);